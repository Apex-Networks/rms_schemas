{
  "openapi": "3.0.3",
  "info": {
    "title": "Jobs Schema",
    "version": "2.11.0",
    "description": "Schema for job data"
  },
  "paths": {},
  "components": {
    "schemas": {
      "Deltas": {
        "type": "object",
        "properties": {
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "rmsSchemaVersion": {
            "type": "string",
            "nullable": true,
            "description": "The rms_schemas repository tag / version",
            "example": "x.y.z"
          },
          "driverUid": {
            "type": "string",
            "description": "Driver's unique identifier i.e. <installation-code>-<user-uid>",
            "example": "000001-3",
            "nullable": true
          },
          "jobsFeature": {
            "$ref": "#/components/schemas/UserJobUpdates",
            "nullable": true
          },
          "activitiesFeature": {
            "type": "object",
            "properties": {}
          },
          "vehicleCheckFeature": {
            "type": "object",
            "properties": {}
          },
          "fuelEntryFeature": {
            "type": "object",
            "properties": {}
          },
          "clockInOutFeature": {
            "type": "object",
            "properties": {}
          },
          "messagesFeature": {
            "x-model-name": "OutgoingMessage",
            "$ref": "./message_schema.json#/components/schemas/OutgoingMessage",
            "nullable": true
          },
          "formsFeature": {
            "type": "object",
            "properties": {}
          },
          "redFlashingLightFeature": {
            "type": "object",
            "properties": {}
          }
        }
      },
      "Job": {
        "type": "object",
        "properties": {
          "rmsSchemaVersion": {
            "type": "string",
            "nullable": false,
            "description": "The rms_schemas repository tag / version",
            "example": "x.y.z"
          },
          "account": {
            "type": "string",
            "x-mapped-to": "ProviderName",
            "nullable": true
          },
          "agentCode": {
            "type": "string",
            "x-mapped-to": "JobContractCode",
            "nullable": true
          },
          "ansNotes": {
            "type": "string",
            "x-mapped-to": "JobAnsNotes",
            "x-used-in-legacy-notes-section": true,
            "nullable": true
          },
          "areImagesRequired": {
            "type": "boolean",
            "x-mapped-to": "JobAreImagesRequired",
            "nullable": false
          },
          "authorisedMiles": {
            "type": "integer",
            "x-mapped-to": "JobAuthorisedMiles",
            "x-used-in-legacy-notes-section": true,
            "nullable": true
          },
          "bookEarliestDateTime": {
            "type": "string",
            "format": "date-time",
            "x-firestore-type": "timestamp",
            "x-mapped-to": "JobBookEarliestDateTime",
            "nullable": true
          },
          "bookLatestDateTime": {
            "type": "string",
            "format": "date-time",
            "x-firestore-type": "timestamp",
            "x-mapped-to": "JobBookLatestDateTime",
            "nullable": true
          },
          "caseNumber": {
            "type": "string",
            "x-mapped-to": "JobCaseNumber",
            "x-used-in-legacy-notes-section": true,
            "nullable": true
          },
          "categoryOfServiceToBeProvided": {
            "type": "string",
            "x-mapped-to": "JobCategoryOfServiceToBeProvided",
            "x-used-in-legacy-notes-section": true,
            "nullable": true
          },
          "conditionReportEmailAddress": {
            "type": "string",
            "x-mapped-to": "RCREmailAddress",
            "nullable": true
          },
          "controllerContactDetails": {
            "type": "string",
            "x-mapped-to": "JobControllerContactDetails",
            "x-used-in-legacy-notes-section": true,
            "nullable": true
          },
          "dateTime": {
            "type": "string",
            "format": "date-time",
            "x-firestore-type": "timestamp",
            "x-mapped-to": "JobDateTime",
            "nullable": false
          },
          "destination": {
            "$ref": "#/components/schemas/Destination",
            "nullable": true
          },
          "docId": {
            "type": "string",
            "x-mapped-to": "NEW",
            "description": "The unique document id for this job in Firebase Firestore",
            "nullable": false
          },
          "driverUid": {
            "type": "string",
            "x-mapped-to": "NEW",
            "description": "Driver's unique identifier i.e. <installation-code>-<user-uid>",
            "example": "000001-3",
            "nullable": false
          },
          "eta": {
            "type": "string",
            "format": "date-time",
            "x-firestore-type": "timestamp",
            "x-mapped-to": "NEW",
            "description": "Expected time of arrival as set by the driver when accepting the job",
            "nullable": true
          },
          "incomingEventType": {
            "$ref": "#/components/schemas/IncomingEventTypeValues",
            "nullable": true
          },
          "hasSpecialNeeds": {
            "type": "boolean",
            "x-mapped-to": "JobHasSpecialNeeds",
            "x-used-in-legacy-notes-section": true,
            "nullable": true
          },
          "id": {
            "type": "string",
            "x-mapped-to": "JobId",
            "description": "The job id - note that an ANS job does not have a job id",
            "nullable": true
          },
          "isCancelled": {
            "type": "boolean",
            "x-mapped-to": "NEW",
            "nullable": false
          },
          "isFaultOutcomeAnsStandard": {
            "type": "boolean",
            "x-mapped-to": "NEW",
            "nullable": true
          },
          "isRedeployable": {
            "type": "boolean",
            "x-mapped-to": "NEW",
            "nullable": false
          },
          "location": {
            "$ref": "#/components/schemas/Location",
            "nullable": true
          },
          "locationOfKeys": {
            "type": "string",
            "x-mapped-to": "JobLocationOfKeys",
            "x-used-in-legacy-notes-section": true,
            "nullable": true
          },
          "orderNumber": {
            "type": "string",
            "x-mapped-to": "JobOrderNumber",
            "nullable": false
          },
          "owner": {
            "$ref": "#/components/schemas/Owner",
            "nullable": true
          },
          "passengers": {
            "$ref": "#/components/schemas/Passengers",
            "nullable": true
          },
          "priority": {
            "$ref": "#/components/schemas/Priority",
            "nullable": true
          },
          "requiredTowType": {
            "type": "string",
            "x-mapped-to": "JobRequiredTowType",
            "x-used-in-legacy-notes-section": true,
            "nullable": true
          },
          "ringOnApproachMinutes": {
            "type": "integer",
            "x-mapped-to": "JobRingOnApproachMinutes",
            "nullable": true
          },
          "service": {
            "$ref": "#/components/schemas/Service"
          },
          "symptom": {
            "$ref": "#/components/schemas/Symptom",
            "nullable": true
          },
          "towedItem": {
            "$ref": "#/components/schemas/TowedItem",
            "nullable": true
          },
          "rmsJobType": {
            "$ref": "#/components/schemas/RMSTypeValues",
            "nullable": true
          },
          "vehicle": {
            "$ref": "#/components/schemas/Vehicle",
            "nullable": true
          },
          "vvrfAccountId": {
            "type": "integer",
            "x-mapped-to": "JobVVRFAccountId",
            "nullable": true
          },
          "userJobUpdates": {
            "$ref": "#/components/schemas/UserJobUpdates",
            "nullable": true
          }
        },
        "required": [
          "agentCode",
          "areImagesRequired",
          "dateTime",
          "docId",
          "driverUid",
          "isCancelled",
          "isRedeployable",
          "orderNumber",
          "service",
          "rmsSchemaVersion"
        ]
      },
      "IncomingEventTypeValues": {
        "type": "string",
        "enum": [
          "newJob",
          "updatedJob",
          "cancelledJob"
        ]
      },
      "RMSTypeValues": {
        "type": "string",
        "enum": [
          "recovery",
          "redelivery"
        ]
      },
      "VehicleFuelTypeValues": {
        "type": "string",
        "x-mapped-to": "JobVehicleFuelType",
        "enum": [
          "diesel",
          "petrol",
          "ev",
          "hybrid",
          "hydrogen",
          "lpg",
          "other"
        ]
      },
      "VehicleTransmissionTypeValues": {
        "type": "string",
        "x-mapped-to": "JobVehicleTransmissionType",
        "enum": [
          "manual",
          "auto",
          "manual_4wd",
          "auto_4wd",
          "unknown"
        ]
      },
      "VehicleTypeValues": {
        "type": "string",
        "x-mapped-to": "JobVehicleClass",
        "enum": [
          "bike",
          "car",
          "caravan",
          "coach",
          "truck",
          "van"
        ]
      },
      "UserJobUpdates": {
        "type": "object",
        "properties": {
          "docId": {
            "type": "string",
            "description": "The unique document id for this job in Firebase Firestore",
            "nullable": true
          },
          "jobAcceptance": {
            "$ref": "#/components/schemas/Acceptance",
            "nullable": true
          },
          "jobRejection": {
            "$ref": "#/components/schemas/RejectionReasonValues",
            "nullable": true
          },
          "status": {
            "$ref": "#/components/schemas/Status",
            "nullable": true
          },
          "statusHistory": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Status"
            },
            "nullable": true
          },
          "riskAssessment": {
            "$ref": "#/components/schemas/RiskAssessment",
            "nullable": true
          },
          "odometer": {
            "type": "integer",
            "nullable": true
          },
          "outcome": {
            "$ref": "#/components/schemas/Outcome",
            "nullable": true
          },
          "fault": {
            "$ref": "#/components/schemas/Fault",
            "nullable": true
          },
          "roadsideConditionReport": {
            "$ref": "#/components/schemas/RoadsideConditionReport",
            "nullable": true
          },
          "recoveryConditionReport": {
            "$ref": "#/components/schemas/RecoveryConditionReport",
            "nullable": true
          },
          "deliveryConditionReport": {
            "$ref": "#/components/schemas/DeliveryConditionReport",
            "nullable": true
          },
          "vehicleCheck": {
            "$ref": "#/components/schemas/VehicleCheck",
            "nullable": true
          }
        }
      },
      "Status": {
        "type": "object",
        "properties": {
          "value": {
            "$ref": "#/components/schemas/StatusValues"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time"
          }
        },
        "required": [
          "value",
          "timestamp"
        ]
      },
      "StatusValues": {
        "type": "string",
        "enum": [
          "none",
          "redeployed",
          "accepted",
          "onRoute",
          "atScene",
          "clearScene",
          "complete",
          "cancelled"
        ]
      },
      "RejectionReasonValues": {
        "type": "string",
        "enum": [
          "nightControl",
          "tooBusyToDeal",
          "outOfArea",
          "extremeWeatherConditions",
          "extremeTrafficConditions",
          "noVehiclesFacilitiesAvailable",
          "noStaffAvailable",
          "inDisputeWithOrganisationOrMember",
          "unableToAttendWithinEta",
          "unableToDoRecoveryAfterRoadsideAssist",
          "temporarilyUnavailableOrOffDutyOrClosed",
          "guaranteeOfPaymentNotGiven",
          "noLicenseForThisClass",
          "outOfDriverHours",
          "unableToDoJobOrSupplyParts",
          "alreadyWorkingForThisOrganisation",
          "telephoneOrModemNoAnswer",
          "telephoneOrModemRepeatedlyEngaged",
          "telephoneOrModemUnobtainable",
          "passedToFitter",
          "retransmitRequest"
        ],
        "description": "Reasons why a job may be refused by an agent or provider."
      },
      "Acceptance": {
        "type": "object",
        "properties": {
          "eta": {
            "type": "string",
            "format": "date-time",
            "x-firestore-type": "timestamp",
            "description": "Expected time of arrival as set by the driver when accepting the job"
          },
          "note": {
            "type": "string",
            "nullable": true
          }
        },
        "required": [
          "eta"
        ]
      },
      "RiskAssessment": {
        "type": "object",
        "properties": {
          "traffic": {
            "$ref": "#/components/schemas/RiskLevelValues",
            "nullable": false
          },
          "location": {
            "$ref": "#/components/schemas/RiskLevelValues",
            "nullable": false
          },
          "vehicle": {
            "$ref": "#/components/schemas/RiskLevelValues",
            "nullable": false
          },
          "passenger": {
            "$ref": "#/components/schemas/RiskLevelValues",
            "nullable": false
          }
        },
        "required": [
          "traffic",
          "location",
          "vehicle",
          "passenger"
        ]
      },
      "RiskLevelValues": {
        "type": "string",
        "enum": [
          "normal",
          "increased",
          "high"
        ]
      },
      "Fault": {
        "type": "object",
        "properties": {
          "code": {
            "type": "string",
            "nullable": false
          }
        },
        "required": [
          "code"
        ]
      },
      "Outcome": {
        "type": "object",
        "properties": {
          "code": {
            "type": "string",
            "nullable": false
          },
          "notes": {
            "type": "string",
            "nullable": true
          }
        },
        "required": [
          "code"
        ]
      },
      "TowedItem": {
        "type": "object",
        "properties": {
          "axleType": {
            "type": "string",
            "x-mapped-to": "JobTowedItemAxleType",
            "x-used-in-legacy-notes-section": true,
            "nullable": true
          },
          "description": {
            "type": "string",
            "x-mapped-to": "JobTowedItemDesc",
            "x-used-in-legacy-notes-section": true,
            "nullable": true
          },
          "height": {
            "type": "number",
            "format": "double",
            "x-mapped-to": "JobTowedItemHeight",
            "x-used-in-legacy-notes-section": true,
            "nullable": true
          },
          "length": {
            "type": "number",
            "format": "double",
            "x-mapped-to": "JobTowedItemLength",
            "x-used-in-legacy-notes-section": true,
            "nullable": true
          },
          "weight": {
            "type": "integer",
            "x-mapped-to": "JobTowedItemWeight",
            "x-used-in-legacy-notes-section": true,
            "nullable": true
          },
          "width": {
            "type": "number",
            "format": "double",
            "x-mapped-to": "JobTowedItemWidth",
            "x-used-in-legacy-notes-section": true,
            "nullable": true
          }
        }
      },
      "Destination": {
        "type": "object",
        "properties": {
          "code": {
            "type": "string",
            "x-mapped-to": "JobDestinationCode",
            "nullable": true
          },
          "description": {
            "type": "string",
            "x-mapped-to": "JobDestination",
            "nullable": true
          },
          "gps": {
            "type": "object",
            "x-mapped-to": "NEW",
            "x-firestore-type": "geopoint",
            "nullable": true
          }
        }
      },
      "Service": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "nullable": false
          }
        },
        "required": [
          "id"
        ]
      },
      "Location": {
        "type": "object",
        "properties": {
          "code": {
            "type": "string",
            "x-mapped-to": "JobLocationCode",
            "nullable": true
          },
          "description": {
            "type": "string",
            "x-mapped-to": "JobLocationDescription",
            "nullable": true
          },
          "gps": {
            "type": "object",
            "x-mapped-to": "NEW",
            "x-firestore-type": "geopoint",
            "nullable": true
          }
        }
      },
      "Owner": {
        "type": "object",
        "properties": {
          "address": {
            "type": "string",
            "x-mapped-to": "JobOwnerAddress",
            "x-used-in-legacy-notes-section": true,
            "nullable": true
          },
          "alternatePhone": {
            "type": "string",
            "x-mapped-to": "JobOwnerAlternatePhone",
            "nullable": true
          },
          "membershipNumber": {
            "type": "string",
            "x-mapped-to": "JobOwnerMembershipNo",
            "nullable": true
          },
          "name": {
            "type": "string",
            "x-mapped-to": "JobOwnerName",
            "nullable": true
          },
          "phone": {
            "type": "string",
            "x-mapped-to": "JobOwnerPhone",
            "nullable": true
          },
          "emailReportRecipientList": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "nullable": true
          },
          "postcode": {
            "type": "string",
            "x-mapped-to": "JobOwnerPostcode",
            "x-used-in-legacy-notes-section": true,
            "nullable": true
          }
        }
      },
      "Passengers": {
        "type": "object",
        "description": "The number of passengers in the vehicle",
        "properties": {
          "adult": {
            "type": "integer",
            "x-mapped-to": "JobPassengerAdult",
            "description": "Adult count",
            "nullable": true
          },
          "child": {
            "type": "integer",
            "x-mapped-to": "JobPassengerChild",
            "description": "Child count",
            "nullable": true
          }
        }
      },
      "Priority": {
        "type": "object",
        "properties": {
          "detail": {
            "type": "string",
            "x-mapped-to": "JobPriorityDetail",
            "x-used-in-legacy-notes-section": true,
            "nullable": true
          },
          "reason": {
            "type": "integer",
            "x-mapped-to": "JobPriorityReason",
            "x-used-in-legacy-notes-section": true,
            "nullable": true
          }
        }
      },
      "Symptom": {
        "type": "object",
        "properties": {
          "code": {
            "type": "string",
            "x-mapped-to": "JobSymptomCode",
            "nullable": true
          },
          "description": {
            "type": "string",
            "x-mapped-to": "JobSymptomDescription",
            "nullable": true
          }
        }
      },
      "Vehicle": {
        "type": "object",
        "properties": {
          "axleType": {
            "type": "string",
            "x-mapped-to": "JobVehicleAxleType",
            "x-used-in-legacy-notes-section": true,
            "nullable": true
          },
          "type": {
            "$ref": "#/components/schemas/VehicleTypeValues",
            "nullable": true
          },
          "colour": {
            "type": "string",
            "x-mapped-to": "JobVehicleColour",
            "nullable": true
          },
          "contents": {
            "type": "string",
            "x-mapped-to": "JobVehicleContents",
            "x-used-in-legacy-notes-section": true,
            "nullable": true
          },
          "engineDetails": {
            "type": "string",
            "x-mapped-to": "JobVehicleEngineDetails",
            "x-used-in-legacy-notes-section": true,
            "nullable": true
          },
          "fuelType": {
            "$ref": "#/components/schemas/VehicleFuelTypeValues",
            "nullable": true
          },
          "grossWeight": {
            "type": "string",
            "x-mapped-to": "JobVehicleGrossWeight",
            "x-used-in-legacy-notes-section": true,
            "nullable": true
          },
          "hasTrailer": {
            "type": "boolean",
            "x-mapped-to": "JobVehicleHasTrailer",
            "nullable": true
          },
          "height": {
            "type": "string",
            "x-mapped-to": "JobVehicleHeight",
            "x-used-in-legacy-notes-section": true,
            "nullable": true
          },
          "length": {
            "type": "string",
            "x-mapped-to": "JobVehicleLength",
            "x-used-in-legacy-notes-section": true,
            "nullable": true
          },
          "make": {
            "type": "string",
            "x-mapped-to": "JobVehicleMake",
            "nullable": true
          },
          "model": {
            "type": "string",
            "x-mapped-to": "JobVehicleModel",
            "nullable": true
          },
          "numberOfDoors": {
            "type": "string",
            "x-mapped-to": "JobVehicleNoOfDoors",
            "x-used-in-legacy-notes-section": true,
            "nullable": true
          },
          "odometer": {
            "type": "integer",
            "x-mapped-to": "JobVehicleOdometer",
            "x-used-in-legacy-notes-section": true,
            "nullable": true
          },
          "registration": {
            "type": "string",
            "x-mapped-to": "JobVehicleRegistration",
            "x-used-in-legacy-notes-section": true,
            "nullable": true
          },
          "trailerType": {
            "type": "string",
            "x-mapped-to": "JobVehicleTrailerType",
            "x-used-in-legacy-notes-section": true,
            "nullable": true
          },
          "transmissionType": {
            "$ref": "#/components/schemas/VehicleTransmissionTypeValues",
            "nullable": true
          },
          "vin": {
            "type": "string",
            "x-mapped-to": "JobVehicleVIN",
            "x-used-in-legacy-notes-section": true,
            "nullable": true
          },
          "width": {
            "type": "string",
            "x-mapped-to": "JobVehicleWidth",
            "x-used-in-legacy-notes-section": true,
            "nullable": true
          }
        }
      },
      "ConditionSignature": {
        "type": "object",
        "properties": {
          "signerName": {
            "type": "string",
            "nullable": true
          },
          "refusedOrUnable": {
            "type": "boolean",
            "nullable": true
          },
          "acceptedStatements": {
            "type": "boolean",
            "nullable": true
          },
          "signatureImageBase64": {
            "type": "string",
            "nullable": true
          }
        }
      },
      "RoadsideConditionReport": {
        "type": "object",
        "properties": {
          "acceptanceStatementIds": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "nullable": true
          },
          "comments": {
            "type": "string",
            "nullable": true
          },
          "customerConfirmation": {
            "$ref": "#/components/schemas/ConditionSignature",
            "nullable": true
          },
          "email": {
            "type": "string",
            "nullable": true
          }
        }
      },
      "RecoveryTimeOfDay": {
        "type": "string",
        "enum": [
          "day",
          "night"
        ]
      },
      "RecoveryLiftType": {
        "type": "string",
        "enum": [
          "rearLift",
          "frontLift",
          "totalLift",
          "straightBar"
        ]
      },
      "DamageStrokeColor": {
        "type": "string",
        "enum": [
          "broken",
          "notApplicable",
          "damaged"
        ]
      },
      "DamagePoint": {
        "type": "object",
        "properties": {
          "x": {
            "type": "number",
            "format": "double"
          },
          "y": {
            "type": "number",
            "format": "double"
          }
        },
        "required": [
          "x",
          "y"
        ]
      },
      "DamageStroke": {
        "type": "object",
        "properties": {
          "color": {
            "$ref": "#/components/schemas/DamageStrokeColor"
          },
          "points": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/DamagePoint"
            }
          },
          "width": {
            "type": "number",
            "format": "double",
            "default": 3.0
          }
        },
        "required": [
          "color",
          "points"
        ]
      },
      "RecoveryConditionReport": {
        "type": "object",
        "properties": {
          "vehicleClean": {
            "type": "boolean",
            "nullable": true
          },
          "vehicleDirty": {
            "type": "boolean",
            "nullable": true
          },
          "vehicleWet": {
            "type": "boolean",
            "nullable": true
          },
          "vehicleObscured": {
            "type": "boolean",
            "nullable": true
          },
          "timeOfDay": {
            "$ref": "#/components/schemas/RecoveryTimeOfDay",
            "nullable": true
          },
          "weatherRaining": {
            "type": "boolean",
            "nullable": true
          },
          "weatherSnowing": {
            "type": "boolean",
            "nullable": true
          },
          "weatherFog": {
            "type": "boolean",
            "nullable": true
          },
          "itemsPresentIds": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "nullable": true
          },
          "liftType": {
            "$ref": "#/components/schemas/RecoveryLiftType",
            "nullable": true
          },
          "propShaftRemoved": {
            "type": "boolean",
            "nullable": true
          },
          "halfShaftRemoved": {
            "type": "boolean",
            "nullable": true
          },
          "brakesReleased": {
            "type": "boolean",
            "nullable": true
          },
          "llc": {
            "type": "boolean",
            "nullable": true
          },
          "zeroWheelsOnGround": {
            "type": "boolean",
            "nullable": true
          },
          "numberOfWheelsOnGround": {
            "type": "boolean",
            "nullable": true
          },
          "vehicleType": {
            "type": "string",
            "nullable": true
          },
          "damageStrokes": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/DamageStroke"
            },
            "nullable": true
          },
          "noDamage": {
            "type": "boolean",
            "nullable": true
          },
          "damageImageBase64": {
            "type": "string",
            "nullable": true
          },
          "unattendedDeliveryAuthority": {
            "type": "boolean",
            "nullable": true
          },
          "inspectionNotPractical": {
            "type": "boolean",
            "nullable": true
          },
          "otherComments": {
            "type": "string",
            "nullable": true
          },
          "customerConfirmation": {
            "$ref": "#/components/schemas/ConditionSignature",
            "nullable": true
          },
          "email": {
            "type": "string",
            "nullable": true
          }
        }
      },
      "DeliveryConditionReport": {
        "type": "object",
        "properties": {
          "sameConditionAsRecovery": {
            "type": "boolean",
            "nullable": true
          },
          "viewedRecoveryReport": {
            "type": "boolean",
            "nullable": true
          },
          "conditionReport": {
            "$ref": "#/components/schemas/RecoveryConditionReport",
            "nullable": true
          },
          "customerConfirmation": {
            "$ref": "#/components/schemas/ConditionSignature",
            "nullable": true
          },
          "email": {
            "type": "string",
            "nullable": true
          }
        }
      },
      "VehicleCheck": {
        "type": "object",
        "properties": {}
      }
    }
  }
}
