{
  "openapi": "3.0.3",
  "info": {
    "title": "Job",
    "version": "1.3.0",
    "description": "Use this schema for sending jobs to Firebase Firestore"
  },
  "paths": {},
  "components": {
    "schemas": {
      "Job": {
        "type": "object",
        "properties": {
          "rmsSchemaVersion": {
            "type": "string",
            "nullable": false,
            "description": "The rms_schema repository tag / version",
            "example": "1.1.0"
          },
          "ansNotes": {
            "type": "string",
            "x-mapped-to": "JobAnsNotes",
            "x-used-in-legacy-notes-section": true,
            "nullable": true
          },
          "areImagesRequired": {
            "type": "boolean",
            "x-mapped-to": "JobAreImagesRequired",
            "nullable": false
          },
          "authorisedMiles": {
            "type": "integer",
            "x-mapped-to": "JobAuthorisedMiles",
            "x-used-in-legacy-notes-section": true,
            "nullable": true
          },
          "bookEarliestDateTime": {
            "type": "string",
            "format": "date-time",
            "x-firestore-type": "timestamp",
            "x-mapped-to": "JobBookEarliestDateTime",
            "nullable": true
          },
          "bookLatestDateTime": {
            "type": "string",
            "format": "date-time",
            "x-firestore-type": "timestamp",
            "x-mapped-to": "JobBookLatestDateTime",
            "nullable": true
          },
          "caseNumber": {
            "type": "string",
            "x-mapped-to": "JobCaseNumber",
            "x-used-in-legacy-notes-section": true,
            "nullable": true
          },
          "categoryOfServiceToBeProvided": {
            "type": "string",
            "x-mapped-to": "JobCategoryOfServiceToBeProvided",
            "x-used-in-legacy-notes-section": true,
            "nullable": true
          },
          "conditionReportEmailAddress": {
            "type": "string",
            "x-mapped-to": "RCREmailAddress",
            "nullable": true
          },
          "agentCode": {
            "type": "string",
            "x-mapped-to": "JobContractCode",
            "nullable": true
          },
          "controllerContactDetails": {
            "type": "string",
            "x-mapped-to": "JobControllerContactDetails",
            "x-used-in-legacy-notes-section": true,
            "nullable": true
          },
          "dateTime": {
            "type": "string",
            "format": "date-time",
            "x-firestore-type": "timestamp",
            "x-mapped-to": "JobDateTime",
            "nullable": false
          },
          "destination": {
            "type": "object",
            "properties": {
              "code": {
                "type": "string",
                "x-mapped-to": "JobDestinationCode",
                "nullable": true
              },
              "description": {
                "type": "string",
                "x-mapped-to": "JobDestination",
                "nullable": true
              },
              "gps": {
                "type": "object",
                "x-mapped-to": "NEW",
                "x-firestore-type": "geopoint",
                "nullable": true
              }
            },
            "nullable": true
          },
          "docId": {
            "type": "string",
            "x-mapped-to": "NEW",
            "description": "Example: <job-id>-<driver-uid>-<service-id> although I realise that an ANS job does not have a job id so please come up with a suitable unique identifier.",
            "nullable": false
          },
          "driverUid": {
            "type": "string",
            "x-mapped-to": "NEW",
            "nullable": false
          },
          "eta": {
            "type": "string",
            "format": "date-time",
            "x-firestore-type": "timestamp",
            "x-mapped-to": "NEW",
            "nullable": true
          },
          "hasSpecialNeeds": {
            "type": "boolean",
            "x-mapped-to": "JobHasSpecialNeeds",
            "x-used-in-legacy-notes-section": true,
            "nullable": true
          },
          "id": {
            "type": "string",
            "x-mapped-to": "JobId",
            "description": "Note: ANS jobs will be null while RMS jobs will be populated",
            "nullable": true
          },
          "isCancelled": {
            "type": "boolean",
            "x-mapped-to": "NEW",
            "nullable": false
          },
          "isFaultOutcomeAnsStandard": {
            "type": "boolean",
            "x-mapped-to": "NEW",
            "nullable": true
          },
          "isRedeployable": {
            "type": "boolean",
            "x-mapped-to": "NEW",
            "nullable": false
          },
          "location": {
            "type": "object",
            "properties": {
              "code": {
                "type": "string",
                "x-mapped-to": "JobLocationCode",
                "nullable": true
              },
              "description": {
                "type": "string",
                "x-mapped-to": "JobLocationDescription",
                "nullable": true
              },
              "gps": {
                "type": "object",
                "x-mapped-to": "NEW",
                "x-firestore-type": "geopoint",
                "nullable": true
              }
            },
            "nullable": true
          },
          "locationOfKeys": {
            "type": "string",
            "x-mapped-to": "JobLocationOfKeys",
            "x-used-in-legacy-notes-section": true,
            "nullable": true
          },
          "orderNumber": {
            "type": "string",
            "x-mapped-to": "JobOrderNumber",
            "nullable": false
          },
          "owner": {
            "type": "object",
            "properties": {
              "address": {
                "type": "string",
                "x-mapped-to": "JobOwnerAddress",
                "x-used-in-legacy-notes-section": true,
                "nullable": true
              },
              "alternatePhone": {
                "type": "string",
                "x-mapped-to": "JobOwnerAlternatePhone",
                "nullable": true
              },
              "membershipNo": {
                "type": "string",
                "x-mapped-to": "JobOwnerMembershipNo",
                "nullable": true
              },
              "name": {
                "type": "string",
                "x-mapped-to": "JobOwnerName",
                "nullable": true
              },
              "phone": {
                "type": "string",
                "x-mapped-to": "JobOwnerPhone",
                "nullable": true
              },
              "postcode": {
                "type": "string",
                "x-mapped-to": "JobOwnerPostcode",
                "x-used-in-legacy-notes-section": true,
                "nullable": true
              }
            },
            "nullable": true
          },
          "passengers": {
            "type": "object",
            "properties": {
              "adult": {
                "type": "integer",
                "x-mapped-to": "JobPassengerAdult",
                "nullable": true
              },
              "child": {
                "type": "integer",
                "x-mapped-to": "JobPassengerChild",
                "nullable": true
              }
            },
            "nullable": true
          },
          "priority": {
            "type": "object",
            "properties": {
              "detail": {
                "type": "string",
                "x-mapped-to": "JobPriorityDetail",
                "x-used-in-legacy-notes-section": true,
                "nullable": true
              },
              "reason": {
                "type": "integer",
                "x-mapped-to": "JobPriorityReason",
                "x-used-in-legacy-notes-section": true,
                "nullable": true
              }
            },
            "nullable": true
          },
          "account": {
            "type": "string",
            "x-mapped-to": "ProviderName",
            "nullable": true
          },
          "requiredTowType": {
            "type": "string",
            "x-mapped-to": "JobRequiredTowType",
            "x-used-in-legacy-notes-section": true,
            "nullable": true
          },
          "ringOnApproachMinutes": {
            "type": "integer",
            "x-mapped-to": "JobRingOnApproachMinutes",
            "description": "Note: 0 means not required",
            "nullable": true
          },
          "service": {
            "type": "object",
            "properties": {
              "id": {
                "type": "integer",
                "nullable": false
              }
            },
            "required": [
              "id"
            ],
            "nullable": false
          },
          "symptom": {
            "type": "object",
            "properties": {
              "code": {
                "type": "string",
                "x-mapped-to": "JobSymptomCode",
                "nullable": true
              },
              "description": {
                "type": "string",
                "x-mapped-to": "JobSymptomDescription",
                "nullable": true
              }
            },
            "nullable": true
          },
          "towedItem": {
            "type": "object",
            "properties": {
              "axleType": {
                "type": "string",
                "x-mapped-to": "JobTowedItemAxleType",
                "x-used-in-legacy-notes-section": true,
                "nullable": true
              },
              "description": {
                "type": "string",
                "x-mapped-to": "JobTowedItemDesc",
                "x-used-in-legacy-notes-section": true,
                "nullable": true
              },
              "height": {
                "type": "number",
                "format": "double",
                "x-mapped-to": "JobTowedItemHeight",
                "x-used-in-legacy-notes-section": true,
                "nullable": true
              },
              "length": {
                "type": "number",
                "format": "double",
                "x-mapped-to": "JobTowedItemLength",
                "x-used-in-legacy-notes-section": true,
                "nullable": true
              },
              "weight": {
                "type": "integer",
                "x-mapped-to": "JobTowedItemWeight",
                "x-used-in-legacy-notes-section": true,
                "nullable": true
              },
              "width": {
                "type": "number",
                "format": "double",
                "x-mapped-to": "JobTowedItemWidth",
                "x-used-in-legacy-notes-section": true,
                "nullable": true
              }
            },
            "nullable": true
          },
          "jobType": {
            "$ref": "#/components/schemas/JobTypeValues",
            "nullable": true
          },
          "vehicle": {
            "type": "object",
            "properties": {
              "axleType": {
                "type": "string",
                "x-mapped-to": "JobVehicleAxleType",
                "x-used-in-legacy-notes-section": true,
                "nullable": true
              },
              "type": {
                "$ref": "#/components/schemas/VehicleTypeValues",
                "nullable": true
              },
              "colour": {
                "type": "string",
                "x-mapped-to": "JobVehicleColour",
                "nullable": true
              },
              "contents": {
                "type": "string",
                "x-mapped-to": "JobVehicleContents",
                "x-used-in-legacy-notes-section": true,
                "nullable": true
              },
              "engineDetails": {
                "type": "string",
                "x-mapped-to": "JobVehicleEngineDetails",
                "x-used-in-legacy-notes-section": true,
                "nullable": true
              },
              "fuelType": {
                "type": "string",
                "x-mapped-to": "JobVehicleFuelType",
                "nullable": true
              },
              "grossWeight": {
                "type": "string",
                "x-mapped-to": "JobVehicleGrossWeight",
                "x-used-in-legacy-notes-section": true,
                "nullable": true
              },
              "hasTrailer": {
                "type": "boolean",
                "x-mapped-to": "JobVehicleHasTrailer",
                "nullable": true
              },
              "height": {
                "type": "string",
                "x-mapped-to": "JobVehicleHeight",
                "x-used-in-legacy-notes-section": true,
                "nullable": true
              },
              "length": {
                "type": "string",
                "x-mapped-to": "JobVehicleLength",
                "x-used-in-legacy-notes-section": true,
                "nullable": true
              },
              "make": {
                "type": "string",
                "x-mapped-to": "JobVehicleMake",
                "nullable": true
              },
              "model": {
                "type": "string",
                "x-mapped-to": "JobVehicleModel",
                "nullable": true
              },
              "numberOfDoors": {
                "type": "string",
                "x-mapped-to": "JobVehicleNoOfDoors",
                "x-used-in-legacy-notes-section": true,
                "nullable": true
              },
              "odometer": {
                "type": "string",
                "x-mapped-to": "JobVehicleOdometer",
                "x-used-in-legacy-notes-section": true,
                "nullable": true
              },
              "registration": {
                "type": "string",
                "x-mapped-to": "JobVehicleRegistration",
                "x-used-in-legacy-notes-section": true,
                "nullable": true
              },
              "trailerType": {
                "type": "string",
                "x-mapped-to": "JobVehicleTrailerType",
                "x-used-in-legacy-notes-section": true,
                "nullable": true
              },
              "transmissionType": {
                "$ref": "#/components/schemas/VehicleTransmissionTypeValues",
                "nullable": true
              },
              "vin": {
                "type": "string",
                "x-mapped-to": "JobVehicleVIN",
                "x-used-in-legacy-notes-section": true,
                "nullable": true
              },
              "width": {
                "type": "string",
                "x-mapped-to": "JobVehicleWidth",
                "x-used-in-legacy-notes-section": true,
                "nullable": true
              }
            },
            "nullable": true
          },
          "vvrfAccountId": {
            "type": "integer",
            "x-mapped-to": "JobVVRFAccountId",
            "nullable": true
          }
        },
        "required": [
          "agentCode",
          "areImagesRequired",
          "dateTime",
          "docId",
          "driverUid",
          "isCancelled",
          "isRedeployable",
          "orderNumber",
          "service",
          "rmsSchemaVersion"
        ]
      },
      "JobTypeValues": {
        "type": "string",
        "enum": [
          "recovery",
          "redelivery"
        ]
      },
      "VehicleTypeValues": {
        "type": "string",
        "x-mapped-to": "JobVehicleClass",
        "enum": [
          "bike","car", "caravan", "coach", "truck", "van"
        ]
      },
      "VehicleTransmissionTypeValues": {
        "type": "string",
        "x-mapped-to": "JobVehicleTransmissionType",
        "enum": [
          "manual",  "auto", "manual_4wd", "auto_4wd"
        ]
      }
    }
  }
}
